---
import '../styles/theme.css';
import '../styles/home.css';
---

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Magnefu - Developer, Creator, Explorer">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <title>magnefu</title>
</head>
<body>
    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-bg">
            <div class="bg-dots"></div>
        </div>
        <div class="hero-content">
            <div class="logo-container">
                <img src="/img/logo_alt.png" alt="magnefu logo" class="main-logo">
                <div class="logo-rings">
                    <div class="ring ring-1"></div>
                    <div class="ring ring-2"></div>
                    <div class="ring ring-3"></div>
                </div>
            </div>
            <h1 class="hero-title">Developer, Creator, Explorer</h1>
            <p class="hero-subtitle">Building innovative digital experiences through code, creativity, and curiosity</p>
            <a href="#work" class="cta-button">
                <span>Explore My Work</span>
                <span>‚Üì</span>
            </a>
        </div>
    </section>

    <!-- Navigation -->
    <nav class="nav" id="nav">
        <div class="nav-content">
            <img src="/img/logo_alt.png" alt="magnefu" class="nav-logo">
            <ul class="nav-links">
                <li><a href="#about" class="nav-link">About</a></li>
                <li><a href="#work" class="nav-link">Work</a></li>
                <li><a href="#contact" class="nav-link">Contact</a></li>
                <li><a href="/devblog" class="nav-link nav-link-special">Devblog</a></li>
            </ul>
            <div class="nav-spacer"></div>
        </div>
    </nav>

    <!-- About Section -->
    <section class="about" id="about">
        <div class="about-content">
            <h2 class="section-title">About</h2>
            <p class="about-text">
                I'm passionate about creating digital experiences that push boundaries and solve real problems. 
                From web development to game engines, I explore the intersection of technology and creativity.
            </p>
            
            <div class="skills-grid">
                <div class="skill-card">
                    <div class="skill-icon">üåê</div>
                    <h3 class="skill-title">Web Development</h3>
                    <p class="skill-desc">Modern web applications with cutting-edge technologies and responsive design</p>
                </div>
                <div class="skill-card">
                    <div class="skill-icon">‚öôÔ∏è</div>
                    <h3 class="skill-title">Game Engine</h3>
                    <p class="skill-desc">Building a custom game engine from scratch with Vulkan and modern C++</p>
                </div>
                <div class="skill-card">
                    <div class="skill-icon">üéÆ</div>
                    <h3 class="skill-title">Interactive Media</h3>
                    <p class="skill-desc">Creating engaging interactive experiences and experimental game prototypes</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Work Section -->
    <section class="work" id="work">
        <div class="work-content">
            <h2 class="section-title">Selected Work</h2>
            
            <div class="work-grid">
                <div class="work-card">
                    <div class="work-image">
                        <div class="work-icon">ü§ù</div>
                    </div>
                    <div class="work-info">
                        <h3 class="work-title">Twin Cities Innovation Alliance</h3>
                        <p class="work-desc">Professional website connecting innovators in the Minneapolis-St. Paul area</p>
                        <a href="https://tciamn.org" target="_blank" class="work-link">
                            <span>Visit Site</span>
                            <span>‚Üí</span>
                        </a>
                    </div>
                </div>

                <div class="work-card">
                    <div class="work-image">
                        <div class="work-icon">‚öôÔ∏è</div>
                    </div>
                    <div class="work-info">
                        <h3 class="work-title">Magnefu Engine</h3>
                        <p class="work-desc">Custom game engine built with Vulkan, featuring modern rendering and ECS architecture</p>
                        <a href="#" class="work-link">
                            <span>Learn More</span>
                            <span>‚Üí</span>
                        </a>
                    </div>
                </div>

                <div class="work-card">
                    <div class="work-image">
                        <div class="work-icon">üé®</div>
                    </div>
                    <div class="work-info">
                        <h3 class="work-title">WebGPU Experiments</h3>
                        <p class="work-desc">Interactive visual effects and compute shader experiments using WebGPU</p>
                        <a href="#" class="work-link">
                            <span>View Demos</span>
                            <span>‚Üí</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section class="contact" id="contact">
        <div class="contact-content">
            <h2 class="section-title">Let's Connect</h2>
            <p class="contact-subtitle">
                Interested in collaborating or just want to chat about technology and creative projects?
            </p>
            
                         <div class="contact-links">
                 <a href="mailto:hello@magnefu.com" class="contact-link email">
                     <span class="contact-icon icon-email"></span>
                     <span>Email</span>
                 </a>
                 <a href="https://github.com/magnefu" target="_blank" class="contact-link github">
                     <span class="contact-icon icon-github"></span>
                     <span>GitHub</span>
                 </a>
                 <a href="https://linkedin.com/in/magnefu" target="_blank" class="contact-link linkedin">
                     <span class="contact-icon icon-linkedin"></span>
                     <span>LinkedIn</span>
                 </a>
                 <a href="https://bsky.app/profile/magnefu.bsky.social" target="_blank" class="contact-link bluesky">
                     <span class="contact-icon icon-bluesky"></span>
                     <span>Bluesky</span>
                 </a>
             </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <p>&copy; 2024 magnefu. Built with curiosity and caffeine.</p>
        </div>
    </footer>

    <script>
        // Ultra-smooth scroll with easing for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    const targetPosition = target.offsetTop - 80; // Account for navbar
                    const startPosition = window.pageYOffset;
                    const distance = targetPosition - startPosition;
                    const duration = Math.abs(distance) * 0.5; // Adaptive duration
                    let start = null;

                    function smoothScroll(currentTime) {
                        if (start === null) start = currentTime;
                        const timeElapsed = currentTime - (start || 0);
                        const progress = Math.min(timeElapsed / duration, 1);
                        
                        // Cubic bezier easing for imperceptible smoothness
                        const easeProgress = progress < 0.5 
                            ? 4 * progress * progress * progress 
                            : 1 - Math.pow(-2 * progress + 2, 3) / 2;
                        
                        window.scrollTo(0, startPosition + distance * easeProgress);
                        
                        if (timeElapsed < duration) {
                            requestAnimationFrame(smoothScroll);
                        }
                    }
                    
                    requestAnimationFrame(smoothScroll);
                }
            });
        });

        // Enhanced intersection observer for imperceptible animations
        const observerOptions = {
            threshold: [0, 0.1, 0.2, 0.3],
            rootMargin: '0px 0px -20px 0px'
        };

        const smoothObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                const element = entry.target as HTMLElement;
                const intersectionRatio = entry.intersectionRatio;
                
                if (entry.isIntersecting) {
                    // Gentle fade-in based on intersection ratio
                    element.style.opacity = Math.min(intersectionRatio * 2, 1).toString();
                    element.style.transform = `translateY(${(1 - intersectionRatio) * 10}px)`;
                    
                    if (intersectionRatio > 0.2) {
                        element.classList.add('fade-in');
                    }
                } else {
                    // Subtle fade-out for elements leaving viewport
                    element.style.opacity = Math.max(intersectionRatio, 0.3).toString();
                }
            });
        }, observerOptions);

        // Observe sections for ultra-smooth transitions
        document.querySelectorAll('section').forEach(section => {
            section.classList.add('section-enter');
            smoothObserver.observe(section);
        });

        // Observe individual elements for gentle animations
        const elementObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    setTimeout(() => {
                        entry.target.classList.add('fade-in');
                    }, Math.random() * 200); // Staggered animation
                }
            });
        }, { threshold: 0.15, rootMargin: '0px 0px -30px 0px' });

        // Observe cards and elements with delayed loading
        document.querySelectorAll('.skill-card, .work-card, .contact-link').forEach((el, index) => {
            (el as HTMLElement).style.animationDelay = `${index * 0.1}s`;
            elementObserver.observe(el);
        });

        // Smooth background color transitions on scroll
        let ticking = false;
        function updateBackgroundOnScroll() {
            const scrollPercent = window.pageYOffset / (document.documentElement.scrollHeight - window.innerHeight);
            const hue = 220 + (scrollPercent * 20); // Subtle hue shift
            
            document.documentElement.style.setProperty(
                '--dynamic-bg', 
                `hsl(${hue}, 15%, ${95 + scrollPercent * 2}%)`
            );
            
            ticking = false;
        }

        window.addEventListener('scroll', () => {
            if (!ticking) {
                requestAnimationFrame(updateBackgroundOnScroll);
                ticking = true;
            }
        });

        // Preload animations
        window.addEventListener('load', () => {
            if (document.body) {
                document.body.style.opacity = '1';
                document.body.style.transition = 'opacity 0.5s ease';
            }
        });
    </script>
</body>
</html>
